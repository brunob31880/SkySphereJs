{"version":3,"sources":["components/RADECGrid.js","components/Horizon.js","utils/unitUtils.js","contexts/Skycontext.js","CameraControls.js","components/Stars.js","components/Constellations.js","components/Sky.js","utils/astroUtils.js","components/SkyDome.js","ErrorBoundary.js","components/Sidebar.js","components/Header.js","App.js","index.js"],"names":["RADECGrid","group","useRef","useEffect","dashMaterialRA","THREE","color","dashSize","gapSize","dashMaterialDEC","createCircleGeometry","radius","geometry","positions","Float32Array","i","theta","Math","PI","cos","sin","setAttribute","ra","circGeom","rotateZ","degToRad","rotateY","circ","computeLineDistances","current","add","dec","translateY","_jsx","ref","Horizon","meshRef","renderOrder","_jsxs","rotation","children","attach","args","side","transparent","opacity","depthWrite","degrees","hmsToRad","hours","minutes","seconds","hmsToDeg","dmsToRad","dmsToDeg","SkyContext","React","createContext","SkyProvider","_ref","_useState","useState","_useState2","_slicedToArray","representation","setRepresentation","_useState3","_useState4","shownConstellations","setShownConstellations","_useState5","Date","_useState6","currentTime","setCurrentTime","_useState7","latitude","longitude","_useState8","location","setLocation","_useState9","_useState10","starsData","setStarsData","_useState11","_useState12","hipToIndex","_useState13","_useState14","maxShownMagnitude","setMaxShownMagnitude","_useState15","_useState16","constellationLines","setConstellationLines","_useState17","_useState18","isLoaded","setIsLoaded","R","navigator","geolocation","getCurrentPosition","position","coords","error","console","interval","setInterval","clearInterval","Promise","all","fetch","concat","process","then","response","text","_ref2","_ref3","starsDataText","constellationLinesText","minRA","Infinity","maxRA","minDEC","maxDEC","lines","split","filter","line","startsWith","trim","newMagnitudes","presentHips","map","parseInt","sort","a","b","missingHips","Array","from","length","_","hip","includes","log","forEach","index","parts","hipNumber","raParts","part","parseFloat","decParts","apply","_toConsumableArray","mag","isNaN","push","x","z","y","Error","validMagnitudes","minMagnitude","min","maxMagnitude","max","vertices","magnitudes","parsedLines","abbreviation","abbreviationGroup","startStar","endStar","Provider","value","_defineProperty","toggleShownConstellations","toggleRepresentation","CameraControls","previousMousePosition","setPreviousMousePosition","isMouseDown","setIsMouseDown","_useThree","useContext","useThree","camera","gl","size","handleMouseMove","event","deltaX","offsetX","deltaY","offsetY","horizontalRotation","setFromAxisAngle","verticalRotation","quaternion","multiply","canvas","domElement","addEventListener","removeEventListener","handleWheel","zoomChange","sign","zoom","clamp","updateProjectionMatrix","handleKeyDown","rotationAngle","code","rotateOnAxis","window","handleMouseDown","button","handleMouseUp","set","_Fragment","Html","style","top","left","display","flexDirection","gap","width","toFixed","getWorldDirection","Stars","scene","_useContext","starGroupRef","shaderMaterial","uniforms","starTexture","document","createElement","height","ctx","getContext","gradient","createRadialGradient","addColorStop","fillStyle","fillRect","texture","needsUpdate","createStarTexture","vertexShader","fragmentShader","depthTest","blending","remove","points","Constellations","constellationGroupRef","material","startStarIndex","endStarIndex","undefined","startStarCoords","endStarCoords","setFromPoints","Sky","setRotation","LST","GST","UTC","getSiderealTime","LSTinRadians","inclination","SkyDome","Canvas","background","right","bottom","near","far","intensity","ErrorBoundary","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","hasError","errorInfo","_createClass","key","this","setState","whiteSpace","toString","componentStack","Component","Sidebar","sliderValue","setSliderValue","className","onClick","type","step","onChange","newMagnitude","target","Header","deviceType","offsetHours","getTimezoneOffset","toLocaleTimeString","App","getDeviceType","innerWidth","setDeviceType","handleResize","ReactDOM","createRoot","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.3a5b833a.chunk.js","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport * as THREE from 'three';\n\nfunction RADECGrid() {\n    const group = useRef();\n\n    useEffect(() => {\n        const segments = 64;\n        const numDivisions = 36;  // Par exemple, pour 36 divisions\n        const increment = 360 / numDivisions;\n\n        const dashMaterialRA = new THREE.LineDashedMaterial({\n            color: 0x00ff00,\n            dashSize: 10,\n            gapSize: 5\n        });\n\n        const dashMaterialDEC = new THREE.LineDashedMaterial({\n            color: 0x0000ff,\n            dashSize: 10,\n            gapSize: 5\n        });\n\n        const createCircleGeometry = (radius) => {\n            const geometry = new THREE.BufferGeometry();\n            const positions = new Float32Array((segments + 1) * 3);\n\n            for (let i = 0; i <= segments; i++) {\n                const theta = (i / segments) * Math.PI * 2;\n                positions[i * 3] = radius * Math.cos(theta);\n                positions[i * 3 + 1] = 0;\n                positions[i * 3 + 2] = radius * Math.sin(theta);\n            }\n\n            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));\n            return geometry;\n        };\n\n        for (let ra = 0; ra < 360; ra += increment) {\n            const circGeom = createCircleGeometry(1000);\n            \n            // Tourner le cercle de 90 degrés autour de l'axe Z pour le positionner dans le plan YX.\n            circGeom.rotateZ(THREE.MathUtils.degToRad(90));\n            \n            // Ensuite, tourner la géométrie autour de l'axe Y par ra degrés.\n            circGeom.rotateY(THREE.MathUtils.degToRad(ra));\n        \n            const circ = new THREE.Line(circGeom, dashMaterialRA);\n            circ.computeLineDistances();\n            group.current.add(circ);\n        }\n        \n\n        for (let dec = -90; dec < 90; dec += increment) {\n            const circGeom = createCircleGeometry(1000*Math.cos(THREE.MathUtils.degToRad(dec) ));\n            const circ = new THREE.Line(circGeom, dashMaterialDEC);\n            circ.translateY(1000*Math.sin(THREE.MathUtils.degToRad(dec)));\n            circ.computeLineDistances();\n            group.current.add(circ);\n        }\n\n    }, []);\n\n    return <group ref={group} />;\n}\n\nexport default RADECGrid;\n","import React,{useRef,useEffect} from 'react';\nimport * as THREE from 'three';\n\nfunction Horizon() {\n    const meshRef = useRef();\n\n    useEffect(() => {\n        if (meshRef.current) {\n            meshRef.current.renderOrder = 1; // Assurez-vous que c'est un numéro plus élevé que les autres objets de votre scène\n        }\n    }, []);\n    const radius=1000;\n    const segments =64;\n    return (\n        <mesh ref={meshRef} rotation={[-Math.PI / 2, 0, 0]}>\n            <ringBufferGeometry attach=\"geometry\" args={[0, radius, segments]} />\n            <meshBasicMaterial \n                attach=\"material\" \n                color={0xffffff} \n                side={THREE.DoubleSide} \n                transparent={true} \n                opacity={0.1}\n                depthWrite={false} // Ajout de cette ligne\n            />\n        </mesh>\n    );\n}\n\nexport default Horizon;\n","const degToRad = (degrees) => {\n    return degrees * (Math.PI / 180);\n}\n\nconst hmsToDeg = (hours, minutes, seconds) => {\n    return 15 * (hours + minutes / 60 + seconds / 3600);\n}\n\nconst dmsToDeg = (degrees, minutes, seconds) => {\n    return degrees + minutes / 60 + seconds / 3600;\n}\n\nconst hmsToRad = (hours, minutes, seconds) => {\n    return degToRad(hmsToDeg(hours, minutes, seconds));\n}\n\nconst dmsToRad = (degrees, minutes, seconds) => {\n    return degToRad(dmsToDeg(degrees, minutes, seconds));\n}\n\nexport { degToRad, hmsToDeg, dmsToDeg, hmsToRad, dmsToRad };\n","// SkyContext.js\nimport React, { useState, useEffect } from 'react';\nimport { hmsToRad, dmsToRad } from '../utils/unitUtils';\n\nconst SkyContext = React.createContext();\n\nfunction SkyProvider({ children }) {\n    const [representation, setRepresentation] = useState(\"Equatorial\");\n    const [shownConstellations, setShownConstellations] = useState(\"Oui\");\n    const [currentTime, setCurrentTime] = useState(new Date());\n    const [location, setLocation] = useState({ latitude: null, longitude: null });\n    const [starsData, setStarsData] = useState(null);\n    const [hipToIndex, setHipToIndex] = useState({});\n    const [maxShownMagnitude, setMaxShownMagnitude] = useState(6);\n    const [constellationLines, setConstellationLines] = useState([]);\n    const [isLoaded, setIsLoaded] = useState(false);\n    const R = 1000; // Rayon de la sphère céleste\n\n    const toggleRepresentation = () => {\n        if (representation === 'Equatorial') {\n            setRepresentation('Horizontal');\n        } else {\n            setRepresentation('Equatorial');\n        }\n    };\n\n    const toggleShownConstellations = () => {\n        if (shownConstellations === \"Oui\") {\n            setShownConstellations(\"Non\");\n        } else {\n            setShownConstellations(\"Oui\");\n        }\n    };\n\n    useEffect(() => {\n        if (navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(position => {\n                setLocation({\n                    latitude: position.coords.latitude,\n                    longitude: position.coords.longitude\n                });\n            }, error => {\n                console.error(\"Erreur de géolocalisation:\", error);\n            });\n        } else {\n            console.error(\"Géolocalisation non supportée par ce navigateur.\");\n        }\n    }, []);\n\n    useEffect(() => {\n        const interval = setInterval(() => {\n            setCurrentTime(new Date());\n        }, 1000);\n\n        return () => clearInterval(interval);\n    }, []);\n    const parseDMS = (dms) => {\n        const parts = dms.split(/\\s+/);\n        return parts.map(part => parseFloat(part));\n    };\n\n    const parseHMS = (hms) => {\n        const parts = hms.split(/\\s+/);\n        return parts.map(part => parseFloat(part));\n    };\n    useEffect(() => {\n        Promise.all([\n            fetch(`${process.env.PUBLIC_URL}/datas/hip.tsv`).then(response => response.text()),\n            fetch(`${process.env.PUBLIC_URL}/datas/constellation_line_hip.csv`).then(response => response.text())\n        ]).then(([starsDataText, constellationLinesText]) => {\n            // Logique pour traiter starsDataText et constellationLinesText\n            // Traitement de starsDataText\n            let minRA = Infinity;\n            let maxRA = -Infinity;\n            let minDEC = Infinity;\n            let maxDEC = -Infinity;\n\n            const lines = starsDataText.split('\\n').filter(line => !line.startsWith('#') && line.trim() !== '');\n\n            const coords = [];\n            const newMagnitudes = [];\n            const RA_INDEX = 1;\n            const DEC_INDEX = 2;\n            const MAG_INDEX = 3;\n\n\n            // Créez une liste de tous les numéros HIP présents dans le fichier\n            const presentHips = lines.map(line => parseInt(line.split('|')[0])).sort((a, b) => a - b);\n\n            // Créez une liste complète de 1 à 118322\n            const allHips = Array.from({ length: 118322 }, (_, i) => i + 1);\n\n            // Trouvez les numéros HIP manquants\n            const missingHips = allHips.filter(hip => !presentHips.includes(hip));\n\n            console.log(\"Missing HIP numbers:\", missingHips);\n\n            lines.forEach((line, index) => {\n                const parts = line.split('|');\n                const hipNumber = parseInt(parts[0], 10);\n                hipToIndex[hipNumber] = index;\n                const raParts = parseHMS(parts[RA_INDEX]);\n                const decParts = parseDMS(parts[DEC_INDEX]);\n\n                const ra = hmsToRad(...raParts);\n                const dec = dmsToRad(...decParts);\n                const mag = parseFloat(parts[MAG_INDEX]);\n\n                if (ra < minRA) minRA = ra;\n                if (ra > maxRA) maxRA = ra;\n                if (dec < minDEC) minDEC = dec;\n                if (dec > maxDEC) maxDEC = dec;\n\n                if (!isNaN(mag)) {\n                    newMagnitudes.push(mag);\n                } else {\n                    console.error(\"Invalid magnitude value:\", parts[MAG_INDEX]);\n                }\n\n                const x = R * Math.cos(dec) * Math.cos(ra);\n                const z = R * Math.cos(dec) * Math.sin(ra);\n                const y = R * Math.sin(dec);\n\n                if (!isNaN(x) && !isNaN(y) && !isNaN(z)) {\n                    coords.push(x, y, z);\n                } else {\n                    console.error(\"Problem with HIP=\" + parts[0]);\n                }\n\n                // Vérifier la taille des tableaux de données\n                if ((coords.length / 3) !== newMagnitudes.length) {\n                    console.error(\"Mismatch detected at line index:\", index);\n                    console.error(\"Line content:\", line);\n                    throw new Error(\"Mismatch in data arrays\"); // This will stop further processing\n                }\n            });\n\n\n            console.log(\"Nb étoiles:\" + newMagnitudes.length);\n            console.log(\"RA Range:\", minRA, \"-\", maxRA);\n            console.log(\"DEC Range:\", minDEC, \"-\", maxDEC);\n\n            // Vérifier la gamme de magnitudes\n            const validMagnitudes = newMagnitudes.filter(mag => !isNaN(mag));\n\n            const minMagnitude = Math.min(...validMagnitudes);\n            const maxMagnitude = Math.max(...validMagnitudes);\n            console.log(\"Magnitude Range:\", minMagnitude, \"-\", maxMagnitude);\n            const starsData = {\n                vertices: coords,\n                magnitudes: newMagnitudes,\n                hipToIndex: hipToIndex\n            };\n            // Stockez les données dans le contexte\n            setStarsData(starsData);\n            // Traitement de constellationLinesText\n            const constellationLines = constellationLinesText.split('\\n').filter(line => !line.startsWith('#') && line.trim() !== '');\n            const parsedLines = constellationLines.map(line => {\n                const parts = line.split(',');\n                return {\n                    abbreviation: parts[0],\n                    group: parts[1],\n                    abbreviationGroup: parts[2],\n                    startStar: parseInt(parts[3]),\n                    endStar: parseInt(parts[4])\n                };\n            });\n\n            setConstellationLines(parsedLines);\n            setIsLoaded(true);  // Mettre à jour isLoaded à true une fois que tout est chargé\n        });\n    }, []);\n\n    return (\n        <SkyContext.Provider value={{ isLoaded,shownConstellations, toggleShownConstellations, maxShownMagnitude, setMaxShownMagnitude, starsData, setStarsData, representation, setRepresentation, currentTime, location, toggleRepresentation, constellationLines, isLoaded }}>\n            {children}\n        </SkyContext.Provider>\n    );\n}\n\nexport { SkyContext, SkyProvider };\n","import { useThree, useFrame } from '@react-three/fiber';\nimport { useState, useEffect } from 'react';\nimport * as THREE from 'three';\nimport { Html } from '@react-three/drei';\nimport { SkyContext } from './contexts/Skycontext';\nimport { useContext } from 'react';\n\nfunction CameraControls() {\n  const [previousMousePosition, setPreviousMousePosition] = useState({ x: 0, y: 0 });\n  const [isMouseDown, setIsMouseDown] = useState(false);\n  const { isLoaded } = useContext(SkyContext);\n  const { camera, gl, size } = useThree();\n\n  useEffect(() => {\n    function handleMouseMove(event) {\n      if (!isMouseDown) return;\n\n      const sensitivity = 0.005;\n\n      const deltaX = -(event.offsetX - previousMousePosition.x) * sensitivity;\n      const deltaY = -(event.offsetY - previousMousePosition.y) * sensitivity;\n\n      const horizontalRotation = new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, 1, 0), deltaX);\n      const verticalRotation = new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(1, 0, 0), deltaY);\n\n      camera.quaternion.multiply(horizontalRotation);\n      camera.quaternion.multiply(verticalRotation);\n\n      setPreviousMousePosition({ x: event.offsetX, y: event.offsetY });\n    }\n\n    const canvas = gl.domElement;\n    canvas.addEventListener('mousemove', handleMouseMove);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handleMouseMove);\n    };\n  }, [gl.domElement, camera, previousMousePosition, isMouseDown]);\n\n  useEffect(() => {\n    function handleWheel(event) {\n      const zoomStep = 0.25;\n      const zoomChange = Math.sign(event.deltaY) * zoomStep;\n      camera.zoom += zoomChange;\n      camera.zoom = THREE.MathUtils.clamp(camera.zoom, 1, 10);\n      camera.updateProjectionMatrix();\n    }\n\n    const canvas = gl.domElement;\n    canvas.addEventListener('wheel', handleWheel);\n\n    return () => {\n      canvas.removeEventListener('wheel', handleWheel);\n    };\n  }, [gl.domElement, camera]);\n\n\n  \n  useEffect(() => {\n    function handleKeyDown(event) {\n      const rotationAngle = 0.05;  // Ajustez cette valeur pour des rotations plus rapides ou plus lentes\n\n      switch (event.code) {\n        case 'ArrowUp':\n          camera.rotateOnAxis(new THREE.Vector3(1, 0, 0), rotationAngle);\n          break;\n        case 'ArrowDown':\n          camera.rotateOnAxis(new THREE.Vector3(1, 0, 0), -rotationAngle);\n          break;\n        case 'ArrowLeft':\n          camera.rotateOnAxis(new THREE.Vector3(0, 1, 0), rotationAngle);\n          break;\n        case 'ArrowRight':\n          camera.rotateOnAxis(new THREE.Vector3(0, 1, 0), -rotationAngle);\n          break;\n        default:\n          break;\n      }\n    }\n\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [camera]);\n\n  useEffect(() => {\n    function handleMouseDown(event) {\n      if (event.button === 0) {\n        setIsMouseDown(true);\n        setPreviousMousePosition({ x: event.offsetX, y: event.offsetY });\n      }\n    }\n\n    function handleMouseUp() {\n      setIsMouseDown(false);\n    }\n\n    const canvas = gl.domElement;\n    canvas.addEventListener('mousedown', handleMouseDown);\n    canvas.addEventListener('mouseup', handleMouseUp);\n\n    return () => {\n      canvas.removeEventListener('mousedown', handleMouseDown);\n      canvas.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [gl.domElement]);\n\n  useEffect(() => {\n    camera.position.set(0, 0, 0);\n    camera.updateProjectionMatrix();\n  }, []);\n\n  return (\n    <>\n      <Html>\n        <div style={{\n          position: 'absolute',\n          top: -200,\n          left: -200,\n          color: 'white',\n          display: 'flex',\n          flexDirection: 'row',\n          gap: '20px',\n          width: '600px'\n        }}>\n          <span>Zoom: {camera.zoom.toFixed(2)}</span>\n          <span>Position: {camera.position.x.toFixed(2)}, {camera.position.y.toFixed(2)}, {camera.position.z.toFixed(2)}</span>\n          <span>LookAt: {camera.getWorldDirection(new THREE.Vector3()).x.toFixed(2)}, {camera.getWorldDirection(new THREE.Vector3()).y.toFixed(2)}, {camera.getWorldDirection(new THREE.Vector3()).z.toFixed(2)}</span>\n        </div>\n      </Html>\n    </>\n  );\n}\n\nexport default CameraControls;\n","import { useEffect, useRef, useContext } from 'react';\nimport { useThree } from '@react-three/fiber';\nimport * as THREE from 'three';\nimport { SkyContext } from '../contexts/Skycontext';\n\n\nfunction Stars({rotation}) {\n    const { scene } = useThree();\n    const { maxShownMagnitude,  starsData } = useContext(SkyContext);\n\n    // Créez une référence pour le groupe\n    const starGroupRef = useRef(new THREE.Group());\n\n    useEffect(() => {\n        starGroupRef.current.rotation.y = rotation.y;\n        starGroupRef.current.rotation.x = rotation.x;\n    }, [rotation]);\n\n    useEffect(() => {\n        if (!starsData) return;\n        console.log(\"Mise à jour maxShownMagnitude= \" + maxShownMagnitude);\n        const geometry = new THREE.BufferGeometry();\n        geometry.setAttribute('position', new THREE.Float32BufferAttribute(starsData.vertices, 3));\n        geometry.setAttribute('magnitude', new THREE.Float32BufferAttribute(starsData.magnitudes, 1));\n\n        function createStarTexture() {\n            const canvas = document.createElement('canvas');\n            canvas.width = 64;  // Doubler la résolution pour un dégradé plus doux\n            canvas.height = 64;\n            const ctx = canvas.getContext('2d');\n\n            // Créer un gradient radial\n            const gradient = ctx.createRadialGradient(32, 32, 8, 32, 32, 32);\n            gradient.addColorStop(0, 'rgba(255, 255, 255, 1)');\n            gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n\n            ctx.fillStyle = gradient;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n            const texture = new THREE.Texture(canvas);\n            texture.needsUpdate = true;\n            return texture;\n        }\n\n        const shaderMaterial = new THREE.ShaderMaterial({\n            uniforms: {\n                starTexture: { value: createStarTexture() },\n                maxMagnitude: { value: maxShownMagnitude }\n            },\n            vertexShader: `\n                attribute float magnitude;\n                uniform float maxMagnitude;\n                varying float vMagnitude;\n                void main() {\n                    vMagnitude = magnitude;\n                    gl_PointSize = 1.0 + 19.0 * (1.0 - vMagnitude / maxMagnitude);\n                    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n                }\n            `,\n            fragmentShader: `\n                uniform sampler2D starTexture;\n                uniform float maxMagnitude;\n                varying float vMagnitude;\n                void main() {\n                    if (vMagnitude > maxMagnitude) {\n                        discard;\n                    }\n                    gl_FragColor = texture2D(starTexture, gl_PointCoord);\n                }\n            `,\n            transparent: true,\n            depthTest: true,\n            depthWrite: false,\n            blending: THREE.AdditiveBlending,\n        });\n        // Supprimez tous les enfants existants de starGroupRef.current\n        while (starGroupRef.current.children.length > 0) {\n            starGroupRef.current.remove(starGroupRef.current.children[0]);\n        }\n        const points = new THREE.Points(geometry, shaderMaterial);\n        starGroupRef.current.add(points);\n        scene.add(starGroupRef.current);\n\n        return () => {\n            scene.remove(starGroupRef.current);\n        };\n\n    }, [starsData, scene, maxShownMagnitude]);\n\n    return null;\n}\n\nexport default Stars;\n","import { useEffect, useRef, useContext } from 'react';\nimport { useThree } from '@react-three/fiber';\nimport * as THREE from 'three';\nimport { SkyContext } from '../contexts/Skycontext';\n/**\n * \n * @param {*} param0 \n * @returns \n */\nfunction Constellations({rotation}) {\n    const { scene } = useThree();\n    const { starsData, constellationLines } = useContext(SkyContext);\n\n    // Créez une référence pour le groupe\n    const constellationGroupRef = useRef(new THREE.Group());\n\n    useEffect(() => {\n        constellationGroupRef.current.rotation.y = rotation.y;\n        constellationGroupRef.current.rotation.x = rotation.x;\n    }, [rotation]);\n\n    useEffect(() => {\n        if (!starsData || !constellationLines) return;\n\n        const material = new THREE.LineBasicMaterial({ color: 0xFFFFFF });  // Une ligne blanche pour les constellations\n        constellationLines.forEach(line => {\n            const startStarIndex = starsData.hipToIndex[line.startStar] * 3;\n            const endStarIndex = starsData.hipToIndex[line.endStar] * 3;\n\n            //console.log(\"Start=\" + line.startStar + \" \" + starsData.vertices[startStarIndex] + \",\" + starsData.vertices[startStarIndex + 1] + \",\" + starsData.vertices[startStarIndex + 2]);\n            //console.log(\"End=\" + line.endStar + \" \" + starsData.vertices[endStarIndex] + \",\" + starsData.vertices[endStarIndex + 1] + \",\" + starsData.vertices[endStarIndex + 2]);\n\n            if (starsData.vertices[startStarIndex] !== undefined && starsData.vertices[endStarIndex] !== undefined) {\n                const startStarCoords = new THREE.Vector3(\n                    starsData.vertices[startStarIndex],\n                    starsData.vertices[startStarIndex + 1],\n                    starsData.vertices[startStarIndex + 2]\n                );\n\n                const endStarCoords = new THREE.Vector3(\n                    starsData.vertices[endStarIndex],\n                    starsData.vertices[endStarIndex + 1],\n                    starsData.vertices[endStarIndex + 2]\n                );\n\n                const geometry = new THREE.BufferGeometry().setFromPoints([startStarCoords, endStarCoords]);\n                const line = new THREE.Line(geometry, material);\n                constellationGroupRef.current.add(line);\n            }\n        });\n\n        // Ajoutez le groupe contenant les lignes à la scène\n        scene.add(constellationGroupRef.current);\n\n        return () => {\n            scene.remove(constellationGroupRef.current);\n        };\n\n    }, [starsData, scene, constellationLines]);\n\n    return null;\n}\n\nexport default Constellations;\n","import React, { useState, useEffect,useContext } from 'react';\nimport Stars from './Stars';\nimport Constellations from './Constellations';\nimport { getSiderealTime } from '../utils/astroUtils';\nimport * as THREE from 'three';\nimport { SkyContext } from '../contexts/Skycontext';\n/**\n * \n * @param {*} param0 \n * @returns \n */\nfunction Sky() {\n    const [rotation, setRotation] = useState({ x: 0, y: 0 });\n    const { shownConstellations,representation,location } = useContext(SkyContext);\n\n    useEffect(() => {\n        console.log(\"Changement de representation\")\n        if (representation === 'Equatorial') {\n            setRotation({ x: 0, y: 0 });\n        } else if (representation === 'Horizontal') {\n            const longitude = location.longitude;\n            const latitude = location.latitude;\n            const LST = getSiderealTime(longitude);\n            const LSTinRadians = THREE.MathUtils.degToRad(LST);\n            const inclination = THREE.MathUtils.degToRad(90 - latitude);\n            setRotation({ x: inclination, y: LSTinRadians });\n        }\n    }, [representation, location]);\n\n    return (\n        <>\n            {/* Affiche les étoiles. */}\n            <Stars rotation={rotation} />\n            {/* Affiche les constellations. */}\n            {shownConstellations===\"Oui\" && <Constellations rotation={rotation} />}\n        </>\n    );\n}\n\nexport default Sky;\n","import { degToRad,radToDeg } from \"three/src/math/MathUtils\";\n/**\n * Calcule le temps sidéral local (LST) pour une longitude donnée.\n * \n * @param {number} longitude - La longitude en degrés pour laquelle le temps sidéral sera calculé.\n * @return {number} Le temps sidéral local (LST) en degrés.\n */\nexport function getSiderealTime(longitude) {\n    // Obtener la date et l'heure actuelles\n    const now = new Date();\n\n    // Calculer le nombre de jours écoulés depuis le début du J2000.0\n    const centuryStart = new Date(Date.UTC(2000, 0, 1, 12)); // 1er janvier 2000, 12h UT\n    const daysSinceJ2000 = (now - centuryStart) / (1000 * 60 * 60 * 24);\n\n    // Calculez le temps sidéral vert (GST) en utilisant une formule simplifiée\n    let GST = 280.16 + 360.9856235 * daysSinceJ2000;\n    GST = GST % 360; // Ramenez-le à l'intervalle [0, 360°]\n\n    // Convertir le GST en temps sidéral local (LST) en ajoutant la longitude\n    let LST = GST + longitude;\n    while (LST < 0) LST += 360;\n    while (LST > 360) LST -= 360;\n\n    return LST;\n}\n\n/**\n * Calcule l'heure angulaire d'un astre en fonction du temps sidéral local et de son ascension droite.\n * \n * @param {number} lst - Le temps sidéral local en degrés.\n * @param {number} ra - L'ascension droite de l'astre en degrés.\n * @return {number} L'heure angulaire en degrés.\n */\nfunction calculateHourAngle(lst, ra) {\n    let H = lst - ra;\n\n    // Ajustement pour s'assurer que H est dans l'intervalle [0, 360°] ou [0, -360°].\n    while (H >= 360) {\n        H -= 360;\n    }\n    while (H < 0) {\n        H += 360;\n    }\n\n    return H;\n}\n\n/**\n * Convertit des coordonnées équatoriales à horizontales.\n * \n * @param {number} dec - La déclinaison de l'astre en degrés.\n * @param {number} H - L'heure angulaire en degrés.\n * @param {number} latitude - La latitude de l'observateur en degrés.\n * @return {object} Un objet contenant les coordonnées horizontales : azimut (en degrés) et altitude (en degrés).\n */\nfunction equatorialToHorizontal(dec, H, latitude) {\n    // Calculer l'altitude de l'astre\n    const sinAlt = Math.sin(degToRad(dec)) * Math.sin(degToRad(latitude)) + \n                   Math.cos(degToRad(dec)) * Math.cos(degToRad(latitude)) * Math.cos(degToRad(H));\n    const alt = radToDeg(Math.asin(sinAlt));\n    \n    // Calculer l'azimut de l'astre\n    const cosA = (Math.sin(degToRad(dec)) - Math.sin(degToRad(alt)) * Math.sin(degToRad(latitude))) / \n                 (Math.cos(degToRad(alt)) * Math.cos(degToRad(latitude)));\n    const az = radToDeg(Math.acos(cosA));\n    \n    return { azimuth: az, altitude: alt };\n}\n\n","import React from 'react';\nimport { Canvas } from '@react-three/fiber';\nimport RADECGrid from './RADECGrid';\nimport Horizon from './Horizon';\nimport CameraControls from '../CameraControls';\nimport Sky from './Sky';\n\n/*\nEn ce qui concerne les directions des axes dans Three.js:\n\nL'axe X est dirigé vers la droite.\nL'axe Y est dirigé vers le haut.\nL'axe Z est dirigé en avant, hors de l'écran.\nDonc, dans votre configuration:\n\nL'axe X (rouge dans axesHelper) pointe vers la droite.\nL'axe Y (vert dans axesHelper) pointe vers le haut.\nL'axe Z (bleu dans axesHelper) pointe directement hors de l'écran vers vous.\nLorsque vous utilisez axesHelper, il affiche des lignes représentant ces axes dans ces couleurs. Le rouge est pour X, le vert pour Y, et le bleu pour Z.\n*/\nfunction SkyDome() {\n    return (\n        <Canvas style={{ background: '#001122' }} >\n            <orthographicCamera position={[0, 0, 0]} left={-1000} right={1000} top={1000} bottom={-1000} near={0.1} far={1000} />\n            \n            {/* Afficher le ciel nocturne. */}\n            <Sky />\n\n            {/* Affiche l'horizon. */}\n            <Horizon />\n\n            {/* Affiche la grille RA/DEC. */}\n            <RADECGrid />\n\n            {/* Affiche les aides pour les axes. */}\n            <axesHelper args={[500]} />\n\n            {/* Éclaire la scène avec une lumière ambiante. */}\n            <ambientLight intensity={0.5} />\n\n            {/* Ajoute une lumière directionnelle pointant vers la position spécifiée. */}\n            <directionalLight position={[0, 0, 5]} intensity={1} />\n\n            {/* Contrôles pour la caméra. */}\n            <CameraControls />\n        </Canvas>\n    );\n}\n\nexport default SkyDome;\n","import React, { Component } from 'react';\n\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, error: null, errorInfo: null };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Mettez à jour l'état pour que le prochain rendu affiche le remplacement d'UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // Vous pouvez également enregistrer l'erreur dans un service de reporting d'erreurs\n    console.error(\"Uncaught error:\", error, errorInfo);\n    this.setState({ error, errorInfo });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // Vous pouvez rendre n'importe quelle interface utilisateur de remplacement\n      return (\n        <div>\n          <h1>Quelque chose s'est mal passé.</h1>\n          <details style={{ whiteSpace: 'pre-wrap' }}>\n            {this.state.error && this.state.error.toString()}\n            <br />\n            {this.state.errorInfo.componentStack}\n          </details>\n        </div>\n      );\n    }\n\n    // Si il n'y a pas d'erreur, renvoyer les enfants normalement\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","import React, { useContext, useState } from 'react';\nimport './Sidebar.css';\nimport { SkyContext } from '../contexts/Skycontext';\n\nfunction Sidebar() {\n    const { maxShownMagnitude, setMaxShownMagnitude, representation, toggleRepresentation, shownConstellations, toggleShownConstellations } = useContext(SkyContext);\n\n    // Utilisation d'un état local pour suivre la valeur du curseur\n    const [sliderValue, setSliderValue] = useState(maxShownMagnitude);\n\n    const handleSliderChange = (event) => {\n        const newMagnitude = parseFloat(event.target.value);\n        setSliderValue(newMagnitude);\n        setMaxShownMagnitude(newMagnitude);\n    };\n   \n    return (\n        <div className=\"sidebar\">\n            <h2 className=\"representation-title\">{representation}</h2>\n            <button onClick={toggleRepresentation}>Basculer la représentation</button>\n            <h2 className=\"constellations-title\">Constellations: {shownConstellations}</h2>\n            <div\n                className={`toggle-btn ${shownConstellations === 'Oui' ? 'on' : 'off'}`}\n                onClick={toggleShownConstellations}\n            >\n                <div className=\"toggle-indicator\"></div>\n            </div>\n\n            <div className=\"magnitude-slider\">\n                <label>Magnitude maximale affichée: {sliderValue}</label>\n                <input\n                    type=\"range\"\n                    min=\"0\"\n                    max=\"10\"\n                    step=\"0.1\"\n                    value={sliderValue}\n                    onChange={handleSliderChange}\n                />\n            </div>\n        </div>\n    );\n}\n\nexport default Sidebar;\n","// Header.js\nimport React, { useContext } from 'react';\nimport './Header.css';\nimport { SkyContext } from '../contexts/Skycontext';\n\nfunction Header({deviceType}) {\n    const { currentTime, location } = useContext(SkyContext);\n    //console.log(\"Location: \", location)\n\n    const offsetMinutes = currentTime.getTimezoneOffset();\n    const offsetHours = offsetMinutes / 60;\n\n    return (\n        <div className=\"header\">\n          {deviceType !== \"mobile\" && <h1 className=\"header-title\">SkySphereJS</h1>}\n            <div className=\"right-section\">\n                <span className=\"location\">\n                    {location.latitude && location.longitude ?\n                        `Lat: ${location.latitude.toFixed(2)}, Long: ${location.longitude.toFixed(2)}` :\n                        \"Localisation non disponible\"}\n                </span>\n                <span className=\"time\"> {currentTime.toLocaleTimeString()} UTC {offsetHours >= 0 ? '+' : ''}{offsetHours}</span>\n\n            </div>\n        </div>\n    );\n}\n\nexport default Header;\n","import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport SkyDome from './components/SkyDome';\nimport ErrorBoundary from './ErrorBoundary';\nimport Sidebar from './components/Sidebar';\nimport Header from './components/Header';\nimport { SkyProvider } from './contexts/Skycontext';\n\nfunction App() {\n  const [deviceType, setDeviceType] = useState(getDeviceType(window.innerWidth));\n/**\n  * \n  * @param {*} width \n  * @returns \n  */\nfunction getDeviceType(width) {\n  console.log(\"Width=\"+width);\n  if (width < 768) {\n    return 'mobile';\n  } else if (width <= 1180) {\n    return 'tablette';\n  } else {\n    return 'ordinateur';\n  }\n}\nuseEffect(() => {\n  const handleResize = () => {\n    setDeviceType(getDeviceType(window.innerWidth));\n  };\n\n  window.addEventListener('resize', handleResize);\n  return () => {\n    window.removeEventListener('resize', handleResize);\n  };\n}, []);\n\n\n  return (\n    <div className={`App ${deviceType === \"mobile\" ? \"mobile\" : \"\"}`}>\n      <SkyProvider>\n        <ErrorBoundary>\n          <Header deviceType={deviceType} />\n          <div className=\"content\">\n            <SkyDome />\n          </div>\n          {deviceType !== \"mobile\" && <Sidebar />}\n        </ErrorBoundary>\n      </SkyProvider>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n\n"],"sourceRoot":""}